{"remainingRequest":"/Users/lisa/Desktop/study/mongodb+express/my-project/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/lisa/Desktop/study/mongodb+express/my-project/src/components/edit.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/lisa/Desktop/study/mongodb+express/my-project/src/components/edit.vue","mtime":1584264844302},{"path":"/Users/lisa/Desktop/study/mongodb+express/my-project/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/lisa/Desktop/study/mongodb+express/my-project/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/lisa/Desktop/study/mongodb+express/my-project/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/lisa/Desktop/study/mongodb+express/my-project/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBBbHRlciBmcm9tICIuL2FsdGVyIjsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICJlZGl0IiwKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgY3VzdG9tZXJzOiBbXSwKICAgICAgYWx0ZXI6ICIiLAogICAgICBmbGFnZTpmYWxzZSwKICAgICAgY2xhc3NzOiAiYWxlcnQgYWxlcnQtd2FybmluZyBhbGVydC1kaXNtaXNzaWJsZSIKICAgIH07CiAgfSwKICBjb21wb25lbnRzOiB7CiAgICBBbHRlcgogIH0sCiAgbWV0aG9kczogewogICAgLy8g6I635Y+W5a+55bqUaWTmlbDmja7lnKjpobXpnaLlsZXnpLoKICAgIGZldGNoY3VzdG9tZXJzKGlkKSB7CiAgICAgIHRoaXMuJGh0dHAuZ2V0KCIvZ2V0dXNlcnMvIiArIGlkKS50aGVuKHJlcyA9PiB7CiAgICAgICAgdGhpcy5jdXN0b21lcnMgPSByZXMuZGF0YTsKICAgICAgICBjb25zb2xlLmxvZyhyZXMuZGF0YSk7CiAgICAgIH0pOwogICAgfSwKICAgIC8vIOabtOaWsOaVsOaNrgogICAgdXBkYXRlQ3VzdG9tZXJzKGUpIHsKICAgICAgLy8g6Zi75q2i6buY6K6kc3VibWl05oyJ6ZKu5LqL5Lu2CiAgICAgIGUucHJldmVudERlZmF1bHQoKTsKICAgICAgaWYgKAogICAgICAgICF0aGlzLmN1c3RvbWVycy5uYW1lIHx8CiAgICAgICAgIXRoaXMuY3VzdG9tZXJzLnBob25lIHx8CiAgICAgICAgIXRoaXMuY3VzdG9tZXJzLmVtYWlsCiAgICAgICkgewogICAgICAgIHRoaXMuZmxhZ2U9dHJ1ZQogICAgICAgIHRoaXMuYWx0ZXIgPSAi6K+35aGr5YaZ5a+55bqU55qE5L+h5oGvIgogICAgICB9IGVsc2UgewogICAgICAgIHZhciByZWduYW1lID0gL15bXHU0RTAwLVx1OUZBNVx1ZjkwMC1cdWZhMmTCt3NdezIsMjB9JC87CiAgICAgICAgaWYgKCFyZWduYW1lLnRlc3QodGhpcy5jdXN0b21lcnMubmFtZSkpIHsKICAgICAgICAgIHRoaXMuYWx0ZXIgPSAi5aeT5ZCN5qC85byP5LiN5q2j56GuIjsKICAgICAgICAgIHRoaXMuZmxhZ2U9dHJ1ZQogICAgICAgICAgLy8gcmV0dXJuOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB2YXIgbXlyZWcgPSAvXjA/KDEzWzAtOV18MTRbNS05XXwxNVswMTIzNTY3ODldfDE2NnwxN1swLThdfDE4WzAtOV18MTlbOC05XSlbMC05XXs4fSQvOwogICAgICAgICAgLy8g6L6T5YWl5omL5py65Y+35LiN5ZCI6YCCCiAgICAgICAgICBpZiAoIW15cmVnLnRlc3QodGhpcy5jdXN0b21lcnMucGhvbmUpKSB7CiAgICAgICAgICAgICB0aGlzLmZsYWdlPXRydWUKICAgICAgICAgICAgdGhpcy5hbHRlciA9ICLmiYvmnLrlj7fnoIHmoLzlvI/kuI3mraPnoa4iOwogICAgICAgICAgICByZXR1cm47CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBjb25zdCByZWdlbWFpbCA9IC9eWzAtOWEtekEtWi5fLV0rW0BdWzAtOWEtekEtWi5fLV0rKFsuXVthLXpBLVpdKyl7MSwyfSQvOwogICAgICAgICAgICBpZiAoIXJlZ2VtYWlsLnRlc3QodGhpcy5jdXN0b21lcnMuZW1haWwpKSB7CiAgICAgICAgICAgICAgdGhpcy5mbGFnZT10cnVlCiAgICAgICAgICAgICB0aGlzLmFsdGVyID0gIumCrueuseagvOW8j+S4jeato+ehriI7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgLy8gIOWumuS5ieWvueixoSwKICAgICAgICAgICAgICBsZXQgbmV3dXBkYXRlID0gewogICAgICAgICAgICAgICAgbmFtZTogdGhpcy5jdXN0b21lcnMubmFtZSwKICAgICAgICAgICAgICAgIHBob25lOiB0aGlzLmN1c3RvbWVycy5waG9uZSwKICAgICAgICAgICAgICAgIGVtYWlsOiB0aGlzLmN1c3RvbWVycy5lbWFpbCwKICAgICAgICAgICAgICAgIGVkdWNhdGlvbjogdGhpcy5jdXN0b21lcnMuZWR1Y2F0aW9uLAogICAgICAgICAgICAgICAgZ3JhZHVhdGlvbnNjaG9vbDogdGhpcy5jdXN0b21lcnMuZ3JhZHVhdGlvbnNjaG9vbCwKICAgICAgICAgICAgICAgIGpvYjogdGhpcy5jdXN0b21lcnMuam9iLAogICAgICAgICAgICAgICAgcHJvZmlsZTogdGhpcy5jdXN0b21lcnMucHJvZmlsZQogICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgLy8gIOiOt+WPluimgeabtOaWsOeahOmCo+adoeaVsOaNruWvueW6lOeahGlkLOabtOaWsOaVsOaNruWPkemAgXB1dOivt+axggogICAgICAgICAgICAgIHRoaXMuJGh0dHAKICAgICAgICAgICAgICAgIC5wdXQoCiAgICAgICAgICAgICAgICAgICIvZ2V0dXNlcnMvdXBkYXRlLyIgKyB0aGlzLiRyb3V0ZS5wYXJhbXMuaWQsCiAgICAgICAgICAgICAgICAgIG5ld3VwZGF0ZQogICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgLnRoZW4ocmVzID0+IHsKICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2cocmVzKTsKICAgICAgICAgICAgICAgICAgdGhpcy4kcm91dGVyLnB1c2goewogICAgICAgICAgICAgICAgICAgIG5hbWU6ICJjdXN0b21lcnMiLAogICAgICAgICAgICAgICAgICAgIHF1ZXJ5OiB7CiAgICAgICAgICAgICAgICAgICAgICBhbHRlcjogIueUqOaIt+S/oeaBr+abtOaWsOaIkOWKnyIsCiAgICAgICAgICAgICAgICAgICAgICBjbGFzc3M6ICJhbGVydCBhbGVydC1zdWNjZXNzIGFsZXJ0LWRpc21pc3NpYmxlIgogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgIH0KICAgICAgICAgICB9CiAgICAgICAgIH0KICAgICAgIH0KICAgICB9CiAgIH0sCiAgLy8g5qih5p2/6KKr5Yib5bu65ou/5YiwaWQKICBjcmVhdGVkKCkgewogICAgdGhpcy5mZXRjaGN1c3RvbWVycyh0aGlzLiRyb3V0ZS5wYXJhbXMuaWQpOwogICAgY29uc29sZS5sb2codGhpcy4kcm91dGUucGFyYW1zLmlkKTsKICB9Cn07Cg=="},{"version":3,"sources":["edit.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAsDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"edit.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <div class=\"add container\">\n    <Alter v-show=\"flage\" :message=\"alter\" :class=\"classs\" ></Alter>\n    <h1 class=\"page-head\">编辑用户</h1>\n    <form @submit=\"updateCustomers\">\n      <div class=\"well\">\n        <h4>用户信息</h4>\n        <div class=\"form-group\">\n          <label for>姓名</label>\n          <br />\n          <input type=\"text\" class=\"form-control\" placeholder=\"name\" v-model=\"customers.name\" />\n          <br />\n          <label for>电话</label>\n          <br />\n          <input type=\"text\" class=\"form-control\" placeholder=\"phone\" v-model=\"customers.phone\" />\n          <br />\n          <label for>邮箱</label>\n          <br />\n          <input type=\"text\" class=\"form-control\" placeholder=\"email\" v-model=\"customers.email\" />\n          <br />\n          <label for>学历</label>\n          <br />\n          <input\n            type=\"text\"\n            class=\"form-control\"\n            placeholder=\"education\"\n            v-model=\"customers.education\"\n          />\n          <br />\n          <label for>毕业学校</label>\n          <br />\n          <input\n            type=\"text\"\n            class=\"form-control\"\n            placeholder=\"graduationschool\"\n            v-model=\"customers.graduationschool\"\n          />\n          <br />\n          <label for>职业</label>\n          <br />\n          <input type=\"text\" class=\"form-control\" placeholder=\"job\" v-model=\"customers.job\" />\n          <br />\n          <label for>个人简介</label>\n          <br />\n          <textarea name=\"profile\" class=\"form-control\" rows=\"10\" v-model=\"customers.profile\"></textarea>\n        </div>\n      </div>\n      <!-- 如果这个按钮是submit就会触发系统的方法，如果在form中绑定submit 触发的就是自己写的方法 -->\n      <button type=\"submit\" class=\"btn btn-primary\">修改</button>\n    </form>\n  </div>\n</template>\n\n<script>\nimport Alter from \"./alter\";\nexport default {\n  name: \"edit\",\n  data() {\n    return {\n      customers: [],\n      alter: \"\",\n      flage:false,\n      classs: \"alert alert-warning alert-dismissible\"\n    };\n  },\n  components: {\n    Alter\n  },\n  methods: {\n    // 获取对应id数据在页面展示\n    fetchcustomers(id) {\n      this.$http.get(\"/getusers/\" + id).then(res => {\n        this.customers = res.data;\n        console.log(res.data);\n      });\n    },\n    // 更新数据\n    updateCustomers(e) {\n      // 阻止默认submit按钮事件\n      e.preventDefault();\n      if (\n        !this.customers.name ||\n        !this.customers.phone ||\n        !this.customers.email\n      ) {\n        this.flage=true\n        this.alter = \"请填写对应的信息\"\n      } else {\n        var regname = /^[\\u4E00-\\u9FA5\\uf900-\\ufa2d·s]{2,20}$/;\n        if (!regname.test(this.customers.name)) {\n          this.alter = \"姓名格式不正确\";\n          this.flage=true\n          // return;\n        } else {\n          var myreg = /^0?(13[0-9]|14[5-9]|15[012356789]|166|17[0-8]|18[0-9]|19[8-9])[0-9]{8}$/;\n          // 输入手机号不合适\n          if (!myreg.test(this.customers.phone)) {\n             this.flage=true\n            this.alter = \"手机号码格式不正确\";\n            return;\n          } else {\n            const regemail = /^[0-9a-zA-Z._-]+[@][0-9a-zA-Z._-]+([.][a-zA-Z]+){1,2}$/;\n            if (!regemail.test(this.customers.email)) {\n              this.flage=true\n             this.alter = \"邮箱格式不正确\";\n            } else {\n              //  定义对象,\n              let newupdate = {\n                name: this.customers.name,\n                phone: this.customers.phone,\n                email: this.customers.email,\n                education: this.customers.education,\n                graduationschool: this.customers.graduationschool,\n                job: this.customers.job,\n                profile: this.customers.profile\n              };\n              //  获取要更新的那条数据对应的id,更新数据发送put请求\n              this.$http\n                .put(\n                  \"/getusers/update/\" + this.$route.params.id,\n                  newupdate\n                )\n                .then(res => {\n                  console.log(res);\n                  this.$router.push({\n                    name: \"customers\",\n                    query: {\n                      alter: \"用户信息更新成功\",\n                      classs: \"alert alert-success alert-dismissible\"\n                    }\n                  });\n                });\n             }\n           }\n         }\n       }\n     }\n   },\n  // 模板被创建拿到id\n  created() {\n    this.fetchcustomers(this.$route.params.id);\n    console.log(this.$route.params.id);\n  }\n};\n</script>\n\n<style>\n</style>"]}]}